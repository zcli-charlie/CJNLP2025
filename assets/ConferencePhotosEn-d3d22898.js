import{_ as X,r as u,B as Z,C as R,D as ee,o as te,G as oe,H as se,I as ae,s as $,b as n,c as l,e,d as q,y as ne,t as i,j as c,F as x,h as D,J as le,l as V,w as P,v as E,m as ie,K as re,p as F,L as ue,i as ce}from"./index-9b170f2d.js";import{h as de,p as ve,f as pe,i as me}from"./index-e4fc3890.js";import{c as fe}from"./util-9dadfb95.js";import{S as he}from"./SliderCaptcha-7445dd21.js";const ge={class:"photos-container"},ye={class:"content-wrapper"},_e={class:"page-header"},be={class:"conference-description"},ke={class:"conference-info"},Ce={class:"info-card"},we={class:"info-item"},Pe={class:"info-content"},Se={class:"info-value"},xe={class:"info-item"},Fe={class:"info-content"},ze={class:"info-value"},Be={key:0,class:"info-item"},Ie={class:"info-content"},Ne={class:"info-value"},Ae={key:1,class:"info-item"},De={class:"info-content"},Ve={class:"info-value"},Ee={key:2,class:"info-item"},Me={class:"info-content"},Te={class:"info-value"},Ue=["href"],Le={class:"photos-section"},Re={class:"gallery-tabs"},$e=["onClick"],qe={class:"gallery-container"},Ye={key:0,class:"photo-grid"},Ge=["onClick"],Je={class:"photo-wrapper"},Oe=["src","alt"],je={class:"photo-caption"},He={key:1,class:"empty-state"},We={class:"photo-submission-form"},Ke={class:"form-group"},Qe={class:"form-group"},Xe={class:"form-group"},Ze=["value"],et={class:"form-group"},tt={class:"form-group"},ot={key:0,class:"file-preview"},st=["src"],at={class:"form-group"},nt={class:"checkbox-label"},lt={class:"form-actions"},it=["disabled"],rt={key:0,class:"form-message"},ut={class:"fullscreen-content"},ct=["src","alt"],dt={class:"fullscreen-caption"},vt={class:"fullscreen-nav"},pt={class:"photo-counter"},mt={__name:"ConferencePhotosEn",setup(ft){const Y=u(null),M=Z(),_=parseInt(M.params.year);M.params.location;const h=u(0),d=u(null),v=u(0),z=u([]),r=u({id:0,time:"",venue:"",chair:"",attendees:"",title:"",description:""}),S=["Opening Ceremony","Presentations","Group Photos","Activities"],T={"Opening Ceremony":1,Presentations:2,"Group Photos":3,Activities:4},a=u({name:"",email:"",category:"",description:"",picture:"",agreement:!1}),b=u(null),k=u(!1),g=u(""),y=u(1),C=u(12),B=u(0),w=async()=>{z.value=[];try{const o=await de({year:_,category:T[S[h.value]],pageNo:y.value,pageSize:C.value});o&&(z.value=o.lists||[],B.value=o.count||0,y.value=o.pageNo||1,C.value=o.pageSize||12)}catch(o){console.error("Failed to fetch photos:",o)}},G=async o=>{let t=o.target.files[0];if(t)try{t.size>5*1024*1024&&(t=await fe(t));const m=new FormData;m.append("file",t),m.append("type","2");const A=await ve(m);a.value.picture=A;const s=new FileReader;s.onload=f=>{b.value=f.target.result},s.readAsDataURL(t),F.success("Image uploaded successfully")}catch(m){console.error("Failed to upload image:",m),F.error("Failed to upload image, please try again")}},J=async()=>{try{const o=await pe(_);o&&(r.value={id:o.id,time:`${o.year}`,venue:o.location_en||"",chair:o.chairman||"",attendees:`${o.attendees} attendees`,title:o.title_en||"",description:o.description_en||"",link:o.link||""})}catch(o){console.error("Failed to fetch conference data:",o),F.error("Failed to fetch conference data")}},p=R(()=>z.value.map(o=>({thumbnail:o.picture,fullsize:o.picture,caption:o.description||"No description"})));ee(h,async o=>{y.value=1,await w()});const O=async o=>{y.value=o,await w()},j=async o=>{C.value=o,y.value=1,await w()};R(()=>allConferences.filter(o=>o.year!==_).slice(0,4));const H=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="15px"},I=()=>{document.body.style.overflow="",document.body.style.paddingRight=""},W=o=>{d.value=o,v.value=p.value.findIndex(t=>t===o),H()},U=()=>{d.value=null,ue(()=>{I()})},L=o=>{const t=v.value+o;t>=0&&t<p.value.length&&(v.value=t,d.value=p.value[t])},N=()=>{h.value=0,d.value=null,v.value=0,a.value={name:"",email:"",category:"",caption:"",picture:"",agreement:!1},b.value=null,k.value=!1,g.value="",window.scrollTo(0,0),I()};te(async()=>{document.title=`CJNLP Conference Photos ${_}`,await J(),await w(),I(),window.scrollTo(0,0)}),oe(()=>{N()}),se(()=>{N()}),ae(()=>{N()});const K=async()=>{if(!a.value.picture){F.error("Please upload an image first");return}k.value=!0,g.value="";try{await me({graduates_id:r.value.id,name:a.value.name,email:a.value.email,category:T[a.value.category],description:a.value.description,picture:a.value.picture,year:_}),g.value="Thank you for your submission! Photos will be displayed after review.",a.value={name:a.value.name,email:a.value.email,category:"",description:"",picture:"",agreement:!1},b.value=null;const o=document.getElementById("photo-file");o&&(o.value=""),await w()}catch(o){g.value="Submission failed, please try again later.",console.error("Failed to submit photo:",o)}finally{k.value=!1}};return(o,t)=>{const m=$("router-link"),A=$("el-pagination");return n(),l(x,null,[e("div",ge,[e("div",ye,[e("div",_e,[q(m,{to:"/en/historical",class:"back-link"},{default:ne(()=>t[7]||(t[7]=[e("span",{class:"back-icon"},"‚Üê",-1),e("span",null,"Back to History",-1)])),_:1,__:[7]}),e("h1",null,i(r.value.title),1),e("p",be,i(r.value.description),1)]),e("div",ke,[e("div",Ce,[e("div",we,[t[9]||(t[9]=e("div",{class:"info-icon"},"üìÖ",-1)),e("div",Pe,[t[8]||(t[8]=e("div",{class:"info-label"},"Conference Date",-1)),e("div",Se,i(r.value.time),1)])]),e("div",xe,[t[11]||(t[11]=e("div",{class:"info-icon"},"üìç",-1)),e("div",Fe,[t[10]||(t[10]=e("div",{class:"info-label"},"Venue",-1)),e("div",ze,i(r.value.venue),1)])]),r.value.chair?(n(),l("div",Be,[t[13]||(t[13]=e("div",{class:"info-icon"},"üë•",-1)),e("div",Ie,[t[12]||(t[12]=e("div",{class:"info-label"},"Conference Chair",-1)),e("div",Ne,i(r.value.chair),1)])])):c("",!0),r.value.attendees&&parseInt(r.value.attendees)>0?(n(),l("div",Ae,[t[15]||(t[15]=e("div",{class:"info-icon"},"üßë‚Äçü§ù‚Äçüßë",-1)),e("div",De,[t[14]||(t[14]=e("div",{class:"info-label"},"Attendees",-1)),e("div",Ve,i(r.value.attendees),1)])])):c("",!0),r.value.link?(n(),l("div",Ee,[t[17]||(t[17]=e("div",{class:"info-icon"},"üåê",-1)),e("div",Me,[t[16]||(t[16]=e("div",{class:"info-label"},"Official Website",-1)),e("div",Te,[e("a",{href:r.value.link,target:"_blank",rel:"noopener noreferrer",class:"website-link"}," Visit Website ",8,Ue)])])])):c("",!0)])]),e("div",Le,[e("div",Re,[(n(),l(x,null,D(S,(s,f)=>e("button",{key:f,class:ce(["tab-btn",{active:h.value===f}]),onClick:Q=>h.value=f},i(s),11,$e)),64))]),e("div",qe,[p.value.length>0?(n(),l("div",Ye,[(n(!0),l(x,null,D(p.value,(s,f)=>(n(),l("div",{key:f,class:"photo-item",onClick:Q=>W(s)},[e("div",Je,[e("img",{src:s.thumbnail,alt:s.caption},null,8,Oe),t[18]||(t[18]=e("div",{class:"photo-overlay"},[e("span",{class:"view-icon"},"üîç")],-1))]),e("div",je,i(s.caption),1)],8,Ge))),128))])):(n(),l("div",He,[t[19]||(t[19]=e("div",{class:"empty-icon"},"üì∑",-1)),e("p",null,"No "+i(S[h.value])+" photos available",1),t[20]||(t[20]=e("p",{class:"empty-suggestion"},"You can switch to other categories to view related photos",-1))])),B.value>C.value?(n(),le(A,{key:2,"current-page":y.value,"page-size":C.value,total:B.value,layout:"total, prev, pager, next, jumper",onCurrentChange:O,onSizeChange:j,class:"photo-pagination",style:{margin:"2rem 0 0","text-align":"center"}},null,8,["current-page","page-size","total"])):c("",!0)])]),e("div",We,[t[28]||(t[28]=e("h2",null,"Photo Submission",-1)),t[29]||(t[29]=e("p",{class:"form-description"},"Did you capture memorable moments at the conference? Share your photos with us!",-1)),e("form",{onSubmit:V(K,["prevent"])},[e("div",Ke,[t[21]||(t[21]=e("label",{for:"submitter-name"},"Your Name",-1)),P(e("input",{type:"text",id:"submitter-name","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.name=s),placeholder:"Enter your name",required:""},null,512),[[E,a.value.name]])]),e("div",Qe,[t[22]||(t[22]=e("label",{for:"submitter-email"},"Your Email",-1)),P(e("input",{type:"text",id:"submitter-email","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.email=s),placeholder:"Enter your email address",required:""},null,512),[[E,a.value.email]])]),e("div",Xe,[t[24]||(t[24]=e("label",{for:"photo-category"},"Photo Category",-1)),P(e("select",{id:"photo-category","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.category=s),required:""},[t[23]||(t[23]=e("option",{value:""},"Select a category",-1)),(n(),l(x,null,D(S,s=>e("option",{key:s,value:s},i(s),9,Ze)),64))],512),[[ie,a.value.category]])]),e("div",et,[t[25]||(t[25]=e("label",{for:"photo-caption"},"Photo Caption",-1)),P(e("input",{type:"text",id:"photo-caption","onUpdate:modelValue":t[3]||(t[3]=s=>a.value.description=s),placeholder:"Briefly describe the photo",required:""},null,512),[[E,a.value.description]])]),e("div",tt,[t[26]||(t[26]=e("label",{for:"photo-file"},"Select Photo",-1)),e("input",{type:"file",id:"photo-file",onChange:G,accept:"image/*",required:""},null,32),b.value?(n(),l("div",ot,[e("img",{src:b.value,alt:"Preview"},null,8,st)])):c("",!0)]),e("div",at,[e("label",nt,[P(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>a.value.agreement=s),required:""},null,512),[[re,a.value.agreement]]),t[27]||(t[27]=e("span",null,"I agree to authorize CJNLP conference organizers to use my submitted photos",-1))])]),e("div",lt,[e("button",{type:"submit",class:"submit-btn",disabled:k.value},i(k.value?"Submitting...":"Submit Photo"),9,it)]),g.value?(n(),l("div",rt,i(g.value),1)):c("",!0)],32)])])]),d.value?(n(),l("div",{key:0,class:"fullscreen-photo",onClick:U},[e("div",ut,[e("img",{src:d.value.fullsize,alt:d.value.caption},null,8,ct),e("div",dt,i(d.value.caption),1),e("button",{class:"close-fullscreen",onClick:U},"√ó"),e("div",vt,[v.value>0?(n(),l("button",{key:0,class:"nav-btn prev",onClick:t[5]||(t[5]=V(s=>L(-1),["stop"]))}," ‚Üê ")):c("",!0),e("div",pt,i(v.value+1)+" / "+i(p.value.length),1),v.value<p.value.length-1?(n(),l("button",{key:1,class:"nav-btn next",onClick:t[6]||(t[6]=V(s=>L(1),["stop"]))}," ‚Üí ")):c("",!0)])])])):c("",!0),q(he,{ref_key:"captchaRef",ref:Y,lang:"en"},null,512)],64)}}},bt=X(mt,[["__scopeId","data-v-d511b19a"]]);export{bt as default};
