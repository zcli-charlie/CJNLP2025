import{_ as W,r as u,B as X,C as Z,D as ee,o as te,G as oe,H as se,I as ne,s as $,b as a,c as l,e,d as q,y as ae,t as i,j as c,F as z,h as N,J as le,l as U,w as x,v as V,m as ie,K as re,p as B,L as ue,i as ce}from"./index-9b170f2d.js";import{f as de,h as ve,p as pe,i as me}from"./index-e4fc3890.js";import{S as fe}from"./SliderCaptcha-7445dd21.js";import{c as ge}from"./util-9dadfb95.js";const _e={class:"photos-container"},ye={class:"content-wrapper"},he={class:"page-header"},be={class:"conference-description"},ke={class:"conference-info"},we={class:"info-card"},Ce={class:"info-item"},xe={class:"info-content"},Se={class:"info-value"},Pe={class:"info-item"},ze={class:"info-content"},Be={class:"info-value"},Ie={key:0,class:"info-item"},Fe={class:"info-content"},De={class:"info-value"},Me={key:1,class:"info-item"},Ne={class:"info-content"},Ue={class:"info-value"},Ve={key:2,class:"info-item"},Ae={class:"info-content"},Le={class:"info-value"},Re=["href"],Te={class:"photos-section"},$e={class:"gallery-tabs"},qe=["onClick"],Ee={class:"gallery-container"},Je={key:0,class:"photo-grid"},je=["onClick"],Ge={class:"photo-wrapper"},He=["src","alt"],Ke={class:"photo-caption"},Ye={key:1,class:"empty-state"},Oe={class:"photo-submission-form"},Qe={class:"form-group"},We={class:"form-group"},Xe={class:"form-group"},Ze=["value"],et={class:"form-group"},tt={class:"form-group"},ot={key:0,class:"file-preview"},st=["src"],nt={class:"form-group"},at={class:"checkbox-label"},lt={class:"form-actions"},it=["disabled"],rt={key:0,class:"form-message"},ut={class:"fullscreen-content"},ct=["src","alt"],dt={class:"fullscreen-caption"},vt={class:"fullscreen-nav"},pt={class:"photo-counter"},mt={__name:"ConferencePhotos",setup(ft){const E=u(null),A=X(),S=parseInt(A.params.year);A.params.location;const f=u(0),d=u(null),v=u(0),I=u([]),r=u({id:0,time:"",venue:"",chair:"",attendees:"",title:"",description:""}),P=["ÂºÄÂπïÂºè","Êä•Âëä","ÂêàÂΩ±","Ê¥ªÂä®"],L={ÂºÄÂπïÂºè:1,Êä•Âëä:2,ÂêàÂΩ±:3,Ê¥ªÂä®:4},n=u({name:"",email:"",category:"",description:"",picture:"",agreement:!1}),y=u(null),h=u(!1),g=u(""),_=u(1),b=u(12),F=u(0),J=async()=>{try{const o=await de(S);o&&(r.value={id:o.id,time:`${o.year}Âπ¥`,venue:o.location||"",chair:o.chairman||"",attendees:`${o.attendees}‰∫∫`,title:o.title||"",description:o.description||"",link:o.link||""})}catch(o){console.error("Ëé∑Âèñ‰ºöËÆÆÊï∞ÊçÆÂ§±Ë¥•:",o),B.error("Ëé∑Âèñ‰ºöËÆÆÊï∞ÊçÆÂ§±Ë¥•")}},k=async()=>{I.value=[];try{const o=await ve({year:S,category:L[P[f.value]],pageNo:_.value,pageSize:b.value});o&&(I.value=o.lists||[],F.value=o.count||0,_.value=o.pageNo||1,b.value=o.pageSize||12)}catch(o){console.error("Ëé∑ÂèñÁÖßÁâáÂ§±Ë¥•:",o)}},j=async o=>{let t=o.target.files[0];if(t){t.size>5*1024*1024&&(t=await ge(t));const w=new FormData;w.append("file",t),w.append("type","2");try{const C=await pe(w);n.value.picture=C;const s=new FileReader;s.onload=m=>{y.value=m.target.result},s.readAsDataURL(t),B.success("ÂõæÁâá‰∏ä‰º†ÊàêÂäü")}catch(C){console.error("ÂõæÁâá‰∏ä‰º†Â§±Ë¥•:",C),B.error("ÂõæÁâá‰∏ä‰º†Â§±Ë¥•ÔºåËØ∑ÈáçËØï")}}},G=async()=>{if(!n.value.picture){B.error("ËØ∑ÂÖà‰∏ä‰º†ÂõæÁâá");return}h.value=!0,g.value="";try{await me({graduates_id:r.value.id,name:n.value.name,email:n.value.email,category:L[n.value.category],description:n.value.description,picture:n.value.picture,year:S}),g.value="ÊÑüË∞¢ÊÇ®ÁöÑÊèê‰∫§ÔºÅÁÖßÁâáÂ∞ÜÁªèËøáÂÆ°Ê†∏ÂêéÂ±ïÁ§∫„ÄÇ",n.value={name:n.value.name,email:n.value.email,category:"",description:"",picture:"",agreement:!1},y.value=null;const o=document.getElementById("photo-file");o&&(o.value=""),await k()}catch(o){g.value="Êèê‰∫§Â§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ",console.error("Êèê‰∫§ÁÖßÁâáÂ§±Ë¥•:",o)}finally{h.value=!1}},p=Z(()=>I.value.map(o=>({thumbnail:o.picture,fullsize:o.picture,caption:o.description||"ÊöÇÊó†ÊèèËø∞"})));ee(f,async o=>{_.value=1,await k()});const H=async o=>{_.value=o,await k()},K=async o=>{b.value=o,_.value=1,await k()},Y=()=>{document.body.style.overflow="hidden",document.body.style.paddingRight="15px"},D=()=>{document.body.style.overflow="",document.body.style.paddingRight=""},O=o=>{d.value=o,v.value=p.value.findIndex(t=>t===o),Y()},R=()=>{d.value=null,ue(()=>{D()})},T=o=>{const t=v.value+o;t>=0&&t<p.value.length&&(v.value=t,d.value=p.value[t])},M=()=>{f.value=0,d.value=null,v.value=0,n.value={name:"",email:"",category:"",description:"",picture:"",agreement:!1},y.value=null,h.value=!1,g.value="",window.scrollTo(0,0),D()};return te(async()=>{document.title=`${S}Âπ¥CJNLPÂ§ß‰ºöÁÖßÁâá`,await J(),await k(),D(),window.scrollTo(0,0)}),oe(()=>{M()}),se(()=>{M()}),ne(()=>{M()}),(o,t)=>{const w=$("router-link"),C=$("el-pagination");return a(),l(z,null,[e("div",_e,[e("div",ye,[e("div",he,[q(w,{to:"/historical",class:"back-link"},{default:ae(()=>t[7]||(t[7]=[e("span",{class:"back-icon"},"‚Üê",-1),e("span",null,"ËøîÂõûÂéÜÂè≤Ê≤øÈù©",-1)])),_:1,__:[7]}),e("h1",null,i(r.value.title),1),e("p",be,i(r.value.description),1)]),e("div",ke,[e("div",we,[e("div",Ce,[t[9]||(t[9]=e("div",{class:"info-icon"},"üìÖ",-1)),e("div",xe,[t[8]||(t[8]=e("div",{class:"info-label"},"‰ºöËÆÆÊó∂Èó¥",-1)),e("div",Se,i(r.value.time),1)])]),e("div",Pe,[t[11]||(t[11]=e("div",{class:"info-icon"},"üìç",-1)),e("div",ze,[t[10]||(t[10]=e("div",{class:"info-label"},"‰ºöËÆÆÂú∞ÁÇπ",-1)),e("div",Be,i(r.value.venue),1)])]),r.value.chair?(a(),l("div",Ie,[t[13]||(t[13]=e("div",{class:"info-icon"},"üë•",-1)),e("div",Fe,[t[12]||(t[12]=e("div",{class:"info-label"},"‰ºöËÆÆ‰∏ªÂ∏≠",-1)),e("div",De,i(r.value.chair),1)])])):c("",!0),r.value.attendees&&parseInt(r.value.attendees)>0?(a(),l("div",Me,[t[15]||(t[15]=e("div",{class:"info-icon"},"üßë‚Äçü§ù‚Äçüßë",-1)),e("div",Ne,[t[14]||(t[14]=e("div",{class:"info-label"},"ÂèÇ‰ºö‰∫∫Êï∞",-1)),e("div",Ue,i(r.value.attendees),1)])])):c("",!0),r.value.link?(a(),l("div",Ve,[t[17]||(t[17]=e("div",{class:"info-icon"},"üåê",-1)),e("div",Ae,[t[16]||(t[16]=e("div",{class:"info-label"},"ÂÆòÁΩëÂú∞ÂùÄ",-1)),e("div",Le,[e("a",{href:r.value.link,target:"_blank",rel:"noopener noreferrer",class:"website-link"}," ÁÇπÂáªÂâçÂæÄ ",8,Re)])])])):c("",!0)])]),e("div",Te,[e("div",$e,[(a(),l(z,null,N(P,(s,m)=>e("button",{key:m,class:ce(["tab-btn",{active:f.value===m}]),onClick:Q=>f.value=m},i(s),11,qe)),64))]),e("div",Ee,[p.value.length>0?(a(),l("div",Je,[(a(!0),l(z,null,N(p.value,(s,m)=>(a(),l("div",{key:m,class:"photo-item",onClick:Q=>O(s)},[e("div",Ge,[e("img",{src:s.thumbnail,alt:s.caption},null,8,He),t[18]||(t[18]=e("div",{class:"photo-overlay"},[e("span",{class:"view-icon"},"üîç")],-1))]),e("div",Ke,i(s.caption),1)],8,je))),128))])):(a(),l("div",Ye,[t[19]||(t[19]=e("div",{class:"empty-icon"},"üì∑",-1)),e("p",null,"ÊöÇÊó†"+i(P[f.value])+"ÁÖßÁâá",1),t[20]||(t[20]=e("p",{class:"empty-suggestion"},"ÊÇ®ÂèØ‰ª•ÂàáÊç¢Âà∞ÂÖ∂‰ªñÂàÜÁ±ªÊü•ÁúãÁõ∏ÂÖ≥ÁÖßÁâá",-1))])),F.value>b.value?(a(),le(C,{key:2,"current-page":_.value,"page-size":b.value,total:F.value,layout:"total, prev, pager, next, jumper",onCurrentChange:H,onSizeChange:K,class:"photo-pagination",style:{margin:"2rem 0 0","text-align":"center"}},null,8,["current-page","page-size","total"])):c("",!0)])]),e("div",Oe,[t[28]||(t[28]=e("h2",null,"‰∏™‰∫∫ÁÖßÁâáÊèê‰∫§",-1)),t[29]||(t[29]=e("p",{class:"form-description"},"ÊÇ®ÊãçÊëÑ‰∫ÜÊú¨Ê¨°Â§ß‰ºöÁöÑÁ≤æÂΩ©Áû¨Èó¥ÔºüËØ∑Êèê‰∫§ÊÇ®ÁöÑÁÖßÁâá‰∏éÂ§ßÂÆ∂ÂàÜ‰∫´ÔºÅ",-1)),e("form",{onSubmit:U(G,["prevent"])},[e("div",Qe,[t[21]||(t[21]=e("label",{for:"submitter-name"},"ÊÇ®ÁöÑÂßìÂêç",-1)),x(e("input",{type:"text",id:"submitter-name","onUpdate:modelValue":t[0]||(t[0]=s=>n.value.name=s),placeholder:"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÂßìÂêç",required:""},null,512),[[V,n.value.name]])]),e("div",We,[t[22]||(t[22]=e("label",{for:"submitter-email"},"ÊÇ®ÁöÑÈÇÆÁÆ±",-1)),x(e("input",{type:"text",id:"submitter-email","onUpdate:modelValue":t[1]||(t[1]=s=>n.value.email=s),placeholder:"ËØ∑ËæìÂÖ•ÊÇ®ÁöÑËÅîÁ≥ªÈÇÆÁÆ±",required:""},null,512),[[V,n.value.email]])]),e("div",Xe,[t[24]||(t[24]=e("label",{for:"photo-category"},"ÁÖßÁâáÂàÜÁ±ª",-1)),x(e("select",{id:"photo-category","onUpdate:modelValue":t[2]||(t[2]=s=>n.value.category=s),required:""},[t[23]||(t[23]=e("option",{value:""},"ËØ∑ÈÄâÊã©ÁÖßÁâáÂàÜÁ±ª",-1)),(a(),l(z,null,N(P,s=>e("option",{key:s,value:s},i(s),9,Ze)),64))],512),[[ie,n.value.category]])]),e("div",et,[t[25]||(t[25]=e("label",{for:"photo-caption"},"ÁÖßÁâáËØ¥Êòé",-1)),x(e("input",{type:"text",id:"photo-caption","onUpdate:modelValue":t[3]||(t[3]=s=>n.value.description=s),placeholder:"ËØ∑ÁÆÄË¶ÅÊèèËø∞ÁÖßÁâáÂÜÖÂÆπ"},null,512),[[V,n.value.description]])]),e("div",tt,[t[26]||(t[26]=e("label",{for:"photo-file"},"ÈÄâÊã©ÁÖßÁâá",-1)),e("input",{type:"file",id:"photo-file",onChange:j,accept:"image/*",required:""},null,32),y.value?(a(),l("div",ot,[e("img",{src:y.value,alt:"È¢ÑËßà"},null,8,st)])):c("",!0)]),e("div",nt,[e("label",at,[x(e("input",{type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.agreement=s),required:""},null,512),[[re,n.value.agreement]]),t[27]||(t[27]=e("span",null,"ÊàëÂêåÊÑèÊéàÊùÉCJNLPÂ§ß‰ºöÁªÑÁªáÊñπ‰ΩøÁî®ÊàëÊèê‰∫§ÁöÑÁÖßÁâá",-1))])]),e("div",lt,[e("button",{type:"submit",class:"submit-btn",disabled:h.value},i(h.value?"Êèê‰∫§‰∏≠...":"Êèê‰∫§ÁÖßÁâá"),9,it)]),g.value?(a(),l("div",rt,i(g.value),1)):c("",!0)],32)])])]),d.value?(a(),l("div",{key:0,class:"fullscreen-photo",onClick:R},[e("div",ut,[e("img",{src:d.value.fullsize,alt:d.value.caption},null,8,ct),e("div",dt,i(d.value.caption),1),e("button",{class:"close-fullscreen",onClick:R},"√ó"),e("div",vt,[v.value>0?(a(),l("button",{key:0,class:"nav-btn prev",onClick:t[5]||(t[5]=U(s=>T(-1),["stop"]))}," ‚Üê ")):c("",!0),e("div",pt,i(v.value+1)+" / "+i(p.value.length),1),v.value<p.value.length-1?(a(),l("button",{key:1,class:"nav-btn next",onClick:t[6]||(t[6]=U(s=>T(1),["stop"]))}," ‚Üí ")):c("",!0)])])])):c("",!0),q(fe,{ref_key:"captchaRef",ref:E},null,512)],64)}}},bt=W(mt,[["__scopeId","data-v-56fe5573"]]);export{bt as default};
